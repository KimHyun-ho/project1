<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.human.anihospital.mapper.ProAllAnimalListMapper">
	<!-- 보호자의 환자 조회  -->
	<select id="selectAnimalList" resultType="proAllAnimalListVO" parameterType="int">
		SELECT 
		    a.seq_member AS seqMember,
		    a.seq_animal AS seqAnimal,
		    d.seq_diagnosis AS seqDiagnosis,
		    ah.seq_animal_hospital AS seqAnimalHospital,
		    a.animal_name AS animalName,
		    d.diagnosis_symptom AS diagnosisSymptom, 
		    ah.animal_hospital_name AS animalHospitalName,
		    DATE_FORMAT(d.diagnosis_date, '%Y-%m-%d') AS diagnosisDate
	   FROM
	    	diagnosis as d 
	      	JOIN animal as a ON d.seq_animal = a.seq_animal
	      	JOIN animalhospital as ah ON ah.seq_animal_hospital = d.seq_animal_hospital
	      	join account as ac on ac.seq_member = a.seq_member 
	   WHERE
	    	a.seq_member = #{seqMember}
	   ORDER BY
	    	d.diagnosis_date desc
	</select> 
</mapper>